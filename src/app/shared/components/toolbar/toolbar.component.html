<header
  role="banner"
  class="z-40 backdrop-blur-md shadow-md border-b border-white/10
         bg-gradient-to-r from-[#2563eb] via-[#3b82f6] to-[#60a5fa]
         dark:from-[#0f172a] dark:via-[#1e293b] dark:to-[#334155] transition-all duration-500">

  <div class="mx-auto px-4 flex justify-between items-center h-20">
    <!-- Izquierda -->
    <div class="flex items-center gap-4">
      <button type="button"
        class="md:hidden p-2 rounded-md bg-white/20 dark:bg-gray-900 shadow-md hover:bg-white/30 dark:hover:bg-gray-800 transition"
        (click)="onToggleSidebar()" aria-label="Abrir menú">
        ☰
      </button>

      <h1 class="flex items-center gap-2 text-xl font-bold tracking-wide leading-none
                 text-white hover:opacity-90 transition-opacity duration-300 cursor-pointer">
        🎵
        <span class="relative group">
          LearningMusicPlus
          <span class="absolute left-0 -bottom-1 w-0 h-0.5 bg-yellow-300 transition-all duration-300 group-hover:w-full"></span>
        </span>
      </h1>
    </div>

    <!-- Buscador -->
    <form class="hidden md:flex flex-1 max-w-xl mx-6" (ngSubmit)="submitSearch()" role="search" aria-label="Buscar">
      <div class="relative w-full">
        <input [formControl]="searchCtrl"
          type="search"
          placeholder="Buscar cursos, lecciones o canciones…"
          class="w-full pl-11 pr-24 py-2.5 rounded-2xl bg-white/90 dark:bg-gray-800 text-gray-900 dark:text-gray-100 shadow-sm border border-gray-300 dark:border-gray-700 focus:outline-none focus:ring-2 focus:ring-yellow-300">
        <span class="absolute left-3 top-2.5 text-gray-400">🔍</span>
        <button type="submit"
          class="absolute right-2 top-1/2 -translate-y-1/2 bg-yellow-400 hover:bg-yellow-500 text-black px-4 py-1.5 rounded-xl font-medium shadow">
          Buscar
        </button>
      </div>
    </form>

    <!-- Derecha -->
    <nav class="flex items-center gap-x-5" aria-label="Acciones de usuario">
      <mat-slide-toggle
        [checked]="isDarkMode"
        (change)="toggleTheme($event.checked)"
        class="!text-white transform transition-transform duration-300 hover:scale-110"
        aria-label="Cambiar tema">
        <span *ngIf="!isDarkMode">🌞</span>
        <span *ngIf="isDarkMode">🌙</span>
      </mat-slide-toggle>

      <button type="button"
        class="relative hover:scale-110 transition-transform duration-300 text-white"
        aria-label="Notificaciones">
        🔔
        <span class="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full px-1 shadow">
          {{ notificationsCount }}
        </span>
      </button>

      <!-- Botón usuario -->
      <div class="relative">
        <button type="button" (click)="toggleUserMenu()" aria-label="Abrir menú de usuario">
          <img src="https://i.pravatar.cc/40" alt="Usuario"
               class="w-9 h-9 rounded-full cursor-pointer border-2 border-white/80 shadow-sm">
        </button>
        <div *ngIf="menuOpen"
          class="absolute right-0 mt-3 w-52 bg-white text-black shadow-xl rounded-lg overflow-hidden
                 dark:bg-gray-800 dark:text-white border border-gray-200 dark:border-gray-700">
          <a routerLink="/perfil" class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700" (click)="closeUserMenu()">Mi perfil</a>
          <a routerLink="/configuracion" class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700" (click)="closeUserMenu()">Configuración</a>
          <button type="button" class="w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700" (click)="closeUserMenu()">Cerrar sesión</button>
        </div>
      </div>
    </nav>
  </div>
</header>
